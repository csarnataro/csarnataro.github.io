---
import { Profile } from "~/models/profile";
import ListItem from "./ListItem/ListItem.astro";

interface Props {
  profile: Profile;
  social: any;
  github?: any;
}

const { profile, social, github } = Astro.props;

const isCompanyMention = (company) => {
  return company.startsWith("@") && !company.includes(" ");
};

const companyLink = (company) => {
  return `https://github.com/${company.substring(1)}`;
};
---

<div class="card shadow-lg compact bg-base-100">
  <div class="card-body">
    <div class="text-base-content text-opacity-60">
      {
        profile.location && (
          <ListItem
            icon="ic:sharp-location-on"
            title="Based in:"
            value={profile.location}
          />
        )
      }

      {
        profile.company && (
          <ListItem
            icon="fa-solid:building"
            title="Company:"
            value={profile.company}
            link={
              isCompanyMention(profile.company.trim())
                ? companyLink(profile.company.trim())
                : null
            }
          />
        )
      }
      <ListItem
        icon="ant-design:github-fill"
        title="GitHub:"
        value={github.username}
        link={`https://github.com/${github.username}`}
      />
      {social?.twitter && (
        <ListItem
          icon="simple-icons:twitter"
          title="Twitter:"
          value={social.twitter}
          link={`https://twitter.com/${social.twitter}`}
        />
      )}
        {social?.mastodon && (
          <ListItem
          icon="simple-icons:mastodon"
          title="Mastodon:"
          value={social.mastodon}
          link={`https://${social.mastodon}`}
          />
          )}
      {social?.linkedin && (
        <ListItem
        icon="grommet-icons:linkedin-option"
        title="LinkedIn:"
        value={social.linkedin}
        link={`https://www.linkedin.com/in/${social.linkedin}`}
        />
        )}
      {social?.dribbble && (
        <ListItem
        icon="gg:dribbble"
        title="Dribbble:"
        value={social.dribbble}
        link={`https://dribbble.com/${social.dribbble}`}
        />
        )}
      {social?.behance && (
        <ListItem
        icon="fa-brands:square-behance"
        title="Behance:"
        value={social.behance}
        link={`https://www.behance.net/${social.behance}`}
        />
        )}
      {social?.facebook && (
        <ListItem
        icon="fa-brands:facebook"
        title="Facebook:"
        value={social.facebook}
        link={`https://www.facebook.com/${social.facebook}`}
        />
        )}
      {social?.instagram && (
        <ListItem
        icon="ant-design:instagram-fill"
        title="Instagram:"
        value={social.instagram}
        link={`https://www.instagram.com/${social.instagram}`}
        />
        )}
      {social?.medium && (
        <ListItem
        icon="ant-design:medium-square-filled"
        title="Medium:"
        value={social.medium}
        link={`https://medium.com/@${social.medium}`}
        />
        )}
      {social?.dev && (
        <ListItem
        icon="fa-brands:dev"
        title="Dev:"
        value={social.dev}
        link={`https://dev.to/${social.dev}`}
        />
        )}
      {social?.stackoverflow && (
        <ListItem
        icon="icomoon-free:stackoverflow"
        title="Stack Overflow:"
        value={social.stackoverflow.split('/').slice(-1)}
        link={`https://stackoverflow.com/users/${social.stackoverflow}`}
        />
        )}
      {social?.website && (
        <ListItem
        icon="fa-solid:globe"
        title="Website:"
        value={social.website}
        link={social.website}
        />
        )}
      {social?.phone && (
        <ListItem
        icon="carbon:phone-filled"
        title="Phone:"
        value={social.phone}
        link={`tel:${social.phone}`}
        />
        )}
      {social?.email && (
        <ListItem
        icon="material-symbols:mail-rounded"
        title="Email:"
        value={social.email}
        link={`mailto:${social.email}`}
        />
        )} 
        <!-- 
        -->
    </div>
  </div>
</div>
